<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Officer Tracking - Agency Panel</title>
    <link rel="stylesheet" href="../styles/admin.css">
    <link rel="stylesheet" href="../styles/agency-tracking.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-building"></i>
                    <span>Agency Panel</span>
                </div>
                <button class="sidebar-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item">
                        <a href="dashboard.html">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="requests.html">
                            <i class="fas fa-clipboard-list"></i>
                            <span>Requests</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="field-officers.html">
                            <i class="fas fa-users"></i>
                            <span>Field Officers</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="quality-control.html">
                            <i class="fas fa-shield-alt"></i>
                            <span>Quality Control</span>
                        </a>
                    </li>
                    <li class="nav-item active">
                        <a href="tracking.html">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Live Tracking</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="service-areas.html">
                            <i class="fas fa-map"></i>
                            <span>Service Areas</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="gate-passes.html">
                            <i class="fas fa-id-card"></i>
                            <span>Gate Passes</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="agreements.html">
                            <i class="fas fa-file-contract"></i>
                            <span>Agreements</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="reports.html">
                            <i class="fas fa-chart-bar"></i>
                            <span>Reports</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="settings.html">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <div class="breadcrumb">
                        <a href="tracking.html" class="breadcrumb-link">
                            <i class="fas fa-arrow-left"></i>
                            Back to Tracking
                        </a>
                    </div>
                    <h1>Officer Tracking</h1>
                    <p>Live tracking and location monitoring for <span id="officerName">John Smith (FO001)</span></p>
                </div>
                <div class="header-right">
                    <div class="officer-status">
                        <span class="status-badge status-active" id="officerStatus">Online</span>
                        <span class="last-update" id="lastUpdate">Last update: 2 minutes ago</span>
                    </div>
                    <div class="header-actions">
                        <button class="btn btn-outline" onclick="openMessageModal()">
                            <i class="fas fa-comment"></i>
                            Message
                        </button>
                        <button class="btn btn-primary" onclick="callOfficer()">
                            <i class="fas fa-phone"></i>
                            Call
                        </button>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <div class="page-content">
                <!-- Officer Info Card -->
                <div class="officer-info-card">
                    <div class="officer-avatar">
                        <img src="https://via.placeholder.com/80" alt="Officer" id="officerAvatar">
                        <div class="status-indicator online" id="statusIndicator"></div>
                    </div>
                    <div class="officer-details">
                        <h2 id="officerFullName">John Smith</h2>
                        <p class="officer-id" id="officerId">Field Officer ID: FO001</p>
                        <div class="officer-stats">
                            <div class="stat">
                                <span class="stat-label">Current Activity</span>
                                <span class="stat-value" id="currentActivity">Vehicle Inspection</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Battery Level</span>
                                <span class="stat-value" id="batteryLevel">85%</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Signal Strength</span>
                                <span class="stat-value" id="signalStrength">Excellent</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Speed</span>
                                <span class="stat-value" id="currentSpeed">0 km/h</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Live Map Section -->
                <div class="live-map-section">
                    <div class="section-header">
                        <h3>Live Location</h3>
                        <div class="map-controls">
                            <button class="btn btn-outline btn-sm" onclick="refreshLocation()">
                                <i class="fas fa-refresh"></i>
                                Refresh
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="centerOnOfficer()">
                                <i class="fas fa-crosshairs"></i>
                                Center
                            </button>
                            <button class="btn btn-outline btn-sm" onclick="toggleHeatmap()">
                                <i class="fas fa-fire"></i>
                                Heatmap
                            </button>
                            <button class="btn btn-primary" onclick="startLiveTracking()">
                                <i class="fas fa-play"></i>
                                Start Live Tracking
                            </button>
                        </div>
                    </div>
                    <div class="map-container-large">
                        <div class="map-view-large">
                            <div class="map-overlay">
                                <div class="location-info">
                                    <h4>Current Location</h4>
                                    <p id="currentLocation">Mumbai Central, Maharashtra</p>
                                    <p class="coordinates" id="coordinates">19.0760° N, 72.8777° E</p>
                                </div>
                                <div class="tracking-controls">
                                    <button class="tracking-btn" onclick="zoomIn()">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                    <button class="tracking-btn" onclick="zoomOut()">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <button class="tracking-btn" onclick="toggleSatellite()">
                                        <i class="fas fa-satellite"></i>
                                    </button>
                                    <button class="tracking-btn" onclick="toggleTraffic()">
                                        <i class="fas fa-car"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Location History -->
                <div class="location-history-section">
                    <div class="section-header">
                        <h3>Location History</h3>
                        <div class="history-controls">
                            <select class="input" onchange="filterHistory(this.value)">
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                                <option value="custom">Custom Range</option>
                            </select>
                            <button class="btn btn-outline btn-sm" onclick="exportHistory()">
                                <i class="fas fa-download"></i>
                                Export
                            </button>
                        </div>
                    </div>
                    <div class="history-timeline">
                        <div class="timeline-item">
                            <div class="timeline-marker active"></div>
                            <div class="timeline-content">
                                <div class="timeline-header">
                                    <h4>Mumbai Central, Maharashtra</h4>
                                    <span class="timeline-time">10:30 AM</span>
                                </div>
                                <p class="timeline-description">Vehicle inspection in progress - REQ001</p>
                                <div class="timeline-details">
                                    <span class="detail-item">
                                        <i class="fas fa-map-marker-alt"></i>
                                        19.0760° N, 72.8777° E
                                    </span>
                                    <span class="detail-item">
                                        <i class="fas fa-clock"></i>
                                        15 minutes
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="timeline-header">
                                    <h4>Andheri Station, Mumbai</h4>
                                    <span class="timeline-time">10:15 AM</span>
                                </div>
                                <p class="timeline-description">Traveling to inspection location</p>
                                <div class="timeline-details">
                                    <span class="detail-item">
                                        <i class="fas fa-map-marker-alt"></i>
                                        19.1197° N, 72.8464° E
                                    </span>
                                    <span class="detail-item">
                                        <i class="fas fa-car"></i>
                                        25 km/h
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-marker"></div>
                            <div class="timeline-content">
                                <div class="timeline-header">
                                    <h4>Bandra West, Mumbai</h4>
                                    <span class="timeline-time">9:45 AM</span>
                                </div>
                                <p class="timeline-description">Started duty - Heading to first assignment</p>
                                <div class="timeline-details">
                                    <span class="detail-item">
                                        <i class="fas fa-map-marker-alt"></i>
                                        19.0596° N, 72.8295° E
                                    </span>
                                    <span class="detail-item">
                                        <i class="fas fa-clock"></i>
                                        45 minutes
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Route Analysis -->
                <div class="route-analysis-section">
                    <div class="section-header">
                        <h3>Route Analysis</h3>
                        <div class="analysis-controls">
                            <button class="btn btn-outline btn-sm" onclick="showRouteOptimization()">
                                <i class="fas fa-route"></i>
                                Optimize Route
                            </button>
                        </div>
                    </div>
                    <div class="analysis-grid">
                        <div class="analysis-card">
                            <div class="analysis-icon">
                                <i class="fas fa-road"></i>
                            </div>
                            <div class="analysis-content">
                                <h4>Distance Covered</h4>
                                <p class="analysis-value">12.5 km</p>
                                <span class="analysis-period">Today</span>
                            </div>
                        </div>
                        
                        <div class="analysis-card">
                            <div class="analysis-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="analysis-content">
                                <h4>Active Time</h4>
                                <p class="analysis-value">4h 30m</p>
                                <span class="analysis-period">Today</span>
                            </div>
                        </div>
                        
                        <div class="analysis-card">
                            <div class="analysis-icon">
                                <i class="fas fa-tachometer-alt"></i>
                            </div>
                            <div class="analysis-content">
                                <h4>Average Speed</h4>
                                <p class="analysis-value">18 km/h</p>
                                <span class="analysis-period">Today</span>
                            </div>
                        </div>
                        
                        <div class="analysis-card">
                            <div class="analysis-icon">
                                <i class="fas fa-stopwatch"></i>
                            </div>
                            <div class="analysis-content">
                                <h4>Stops Made</h4>
                                <p class="analysis-value">3</p>
                                <span class="analysis-period">Today</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Message Modal -->
    <div class="modal-overlay" id="messageModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Send Message to Officer</h3>
                <button class="modal-close" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="messageForm">
                    <div class="form-group">
                        <label class="form-label">Recipient</label>
                        <input type="text" class="input" id="recipientName" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Message Type</label>
                        <select class="input" required>
                            <option value="">Select Type</option>
                            <option value="urgent">Urgent</option>
                            <option value="normal">Normal</option>
                            <option value="reminder">Reminder</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Message</label>
                        <textarea class="input" rows="4" placeholder="Enter your message..." required></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="sendMessage()">Send Message</button>
            </div>
        </div>
    </div>

    <script src="../js/agency.js"></script>
    <script src="../js/tracking.js"></script>
    <script>
        // Get officer ID from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const officerId = urlParams.get('id') || 'FO001';
        
        // Officer data mapping
        const officerData = {
            'FO001': {
                name: 'John Smith',
                status: 'Online',
                activity: 'Vehicle Inspection',
                battery: '85%',
                signal: 'Excellent',
                speed: '0 km/h',
                location: 'Mumbai Central, Maharashtra',
                coordinates: '19.0760° N, 72.8777° E',
                avatar: 'https://via.placeholder.com/80'
            },
            'FO002': {
                name: 'Sarah Jones',
                status: 'Online',
                activity: 'Traveling',
                battery: '72%',
                signal: 'Good',
                speed: '25 km/h',
                location: 'Pune Station, Maharashtra',
                coordinates: '18.5204° N, 73.8567° E',
                avatar: 'https://via.placeholder.com/80'
            },
            'FO003': {
                name: 'Mike Wilson',
                status: 'Offline',
                activity: 'Off Duty',
                battery: '45%',
                signal: 'Poor',
                speed: '0 km/h',
                location: 'Nagpur City, Maharashtra',
                coordinates: '21.1458° N, 79.0882° E',
                avatar: 'https://via.placeholder.com/80'
            }
        };
        
        // Update page with officer data
        function updateOfficerData() {
            const data = officerData[officerId];
            if (data) {
                document.getElementById('officerName').textContent = `${data.name} (${officerId})`;
                document.getElementById('officerFullName').textContent = data.name;
                document.getElementById('officerId').textContent = `Field Officer ID: ${officerId}`;
                document.getElementById('officerStatus').textContent = data.status;
                document.getElementById('currentActivity').textContent = data.activity;
                document.getElementById('batteryLevel').textContent = data.battery;
                document.getElementById('signalStrength').textContent = data.signal;
                document.getElementById('currentSpeed').textContent = data.speed;
                document.getElementById('currentLocation').textContent = data.location;
                document.getElementById('coordinates').textContent = data.coordinates;
                document.getElementById('officerAvatar').src = data.avatar;
                document.getElementById('recipientName').value = `${data.name} (${officerId})`;
                
                // Update status indicator
                const statusIndicator = document.getElementById('statusIndicator');
                statusIndicator.className = `status-indicator ${data.status.toLowerCase()}`;
            }
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            updateOfficerData();
        });
        
        // Modal functions
        function openMessageModal() {
            document.getElementById('messageModal').style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('messageModal').style.display = 'none';
        }
        
        // Map control functions
        function refreshLocation() {
            // Simulate location refresh
            console.log('Refreshing location...');
        }
        
        function centerOnOfficer() {
            console.log('Centering on officer...');
        }
        
        function toggleHeatmap() {
            console.log('Toggling heatmap...');
        }
        
        function startLiveTracking() {
            console.log('Starting live tracking...');
        }
        
        function zoomIn() {
            console.log('Zooming in...');
        }
        
        function zoomOut() {
            console.log('Zooming out...');
        }
        
        function toggleSatellite() {
            console.log('Toggling satellite view...');
        }
        
        function toggleTraffic() {
            console.log('Toggling traffic view...');
        }
        
        function filterHistory(value) {
            console.log('Filtering history:', value);
        }
        
        function exportHistory() {
            console.log('Exporting history...');
        }
        
        function showRouteOptimization() {
            console.log('Showing route optimization...');
        }
        
        function callOfficer() {
            console.log('Calling officer...');
        }
        
        function sendMessage() {
            console.log('Sending message...');
            closeModal();
        }
    </script>
</body>
</html> 